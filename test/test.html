<!DOCTYPE html>
<html>
  <head>

    <title>AJST : Asynchronous JavaScript Templating</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script src="//requirejs.org/docs/release/2.1.8/minified/require.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <!-- Latest compiled and minified JavaScript -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"></script>

    <style type="text/css">
      body { padding-top: 70px; }
    </style>

    <!--[if lt IE 9]>
    <style>
    body {
      padding-top: 60px;
    }
    </style>
    <![endif]-->

    <script>

      require(['../js/AJST', 'test.js'], function(AJST, startTest) {

        $(function() {

          AJST.option({debug: true});
          AJST.autocollect();

          new AJST.Promise([
            AJST.ajax('navbar', 'config.json', {url: 'test.tpl'}),
            AJST('container', null, {url: 'test.tpl'})
          ]).then(function(navi, cont) {

            $('body').append(navi, cont);

          }, function(e) {

            throw e;

          }).then(startTest);

        });

      });

    </script>

  </head>
  <body>

    <!-- TestCase : AutoCollection -->
    <script id="Auto collection check" type="text/template">Auto collection enabled.</script>

    <script id="Auto replace" data-ajst="true" type="text/template"><p id="p_<?=$id?>" style="display:none">Auto replace succeed.</p></script>

    <script id="Auto replace with data" data-ajst="true" data-ajst-data='["data","is","ready"]' type="text/template"><p id="p_<?=$id?>" style="display:none"><?=data.join(' ')?></p></script>

    <script id="Auto replace with remote data" data-ajst="true" data-ajst-ajax='sampledata.json' type="text/template"><p id="p_<?=$id?>" style="display:none"><?=data.items.length?></p></script>
    <!-- TestCase : AutoCollection -->

  </body>
</html>
